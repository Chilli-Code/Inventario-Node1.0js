<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel="stylesheet" href="./dashboard.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
  <script src="./js/lottie.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <%- include ('./partials/header/header'); %>
</head>

<body>



  <%- include('./partials/navigation/navigation', {titleMain: titleMain}); %>
    <%- include('./partials/content-header-ventas/button-aÃ±adir') %>
      </div>

      <%- include('./partials/content-header-ventas/content-header-ventas') %>
        <%- include('./partials/dashboard-products/dashboard-products') %>

          <% if (success) { %>
            <div class="swirl-alert" style="background-color: var(--sidebar);">
            </div>
            <% if (success==='Producto agregado correctamente' || success==='Articulo Actualizado Correctamente' || success==='Producto Eliminado' ) { %>
              <% const lottieMap={
                'Producto agregado correctamente' : './js/sendSuccess.json',
                'Producto Eliminado' : './js/delete.json',
                'Articulo Actualizado Correctamente' : './js/update.json' ,
                }; %>
                <script>
                  let success = '<%= success %>';
                  const lottiePath = '<%= lottieMap[success] %>';
                  Swal.fire({
                    title: success,
                    icon: '',
                    html: `<div class="lottie-animation" style="height: 140px; overflow:hidden;" data-animation-path="${lottiePath}"></div>`,
                    confirmButtonText: 'Cerrar',
                    timerProgressBar: true,
                    timer: 3000
                  });
                </script>
                <% } else { %>
                  <script>
                    Swal.fire({
                      title: '<%= success %>',
                      icon: '',
                      html: '<div class="lottie-animation" style="height: 140px; overflow:hidden;" data-animation-path="./js/sendSuccess.json"></div>',
                      confirmButtonText: 'Cerrar',
                      timerProgressBar: true,
                      timer: 5000
                    });
                  </script>
                  <% } %>
                    <% } %>
                      <form></form>
                  
                      <script type="text/javascript">
                        document.addEventListener("keyup", e => {
                          if (e.target.matches("#buscador")) {
                            if (e.key === "Escape") e.target.value = ""
                            document.querySelectorAll(".busqueda").forEach(personasV => {
                              personasV.textContent.toLowerCase().includes(e.target.value.toLowerCase())
                                ? personasV.classList.remove("filtro")
                                : personasV.classList.add("filtro")
                            })
                          }
                          document.querySelectorAll(".busquedaExitosa").forEach(personasV => {
                            personasV.textContent.toLowerCase().includes(e.target.value.toLowerCase()) && e.target.value.toLowerCase() !== ""
                              ? personasV.classList.add("resaltadorFiltro")
                              : personasV.classList.remove("resaltadorFiltro")
                          })
                        })
                      </script>

                      <script>
                        function updateTime() {
                          var date = new Date();
                          var hours = date.getHours();
                          var minutes = date.getMinutes();
                          var seconds = date.getSeconds();
                          var day = date.getDate();
                          var month = date.getMonth() + 1;
                          var year = date.getFullYear();

                          hours = (hours < 10) ? "0" + hours : hours;
                          minutes = (minutes < 10) ? "0" + minutes : minutes;
                          seconds = (seconds < 10) ? "0" + seconds : seconds;
                          month = (month < 10) ? "0" + month : month;
                          day = (day < 10) ? "0" + day : day;

                          var today = day + "/" + month + "/" + year;
                          var time = hours + ":" + minutes + ":" + seconds;

                          document.getElementById("clock").value = today + " - " + time;
                        }

                        setInterval(updateTime, 1000); // Actualiza la hora cada segundo
                      </script>

                      <script>
                        function addBaseURLToHistory() {
                          var urlWithoutQueryString = window.location.href.split('?')[0];
                          history.replaceState({}, '', urlWithoutQueryString);
                        }

                        window.onload = function () {
                          addBaseURLToHistory();
                        };

                      </script>





                      <script src="./js/activateLottie.js"></script>
                      <script src="./partials/navigation/navigation.js"></script>
                      <script src="./partials/dashboard-products/addProduc.js"></script>